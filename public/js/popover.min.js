function _onFacebook(){shareOnFacebook(safari.application.activeBrowserWindow.activeTab.url,safari.application.activeBrowserWindow.activeTab.title)}function _onTwitter(){var e="http://twitter.com/share?url="+safari.application.activeBrowserWindow.activeTab.url+"&via=internetarchive";safari.application.activeBrowserWindow.openTab().url=e}function _onGooglePlus(){var e="https://plus.google.com/share?url="+safari.application.activeBrowserWindow.activeTab.url;safari.application.activeBrowserWindow.openTab().url=e}function _onSavePageNow(){url=safari.application.activeBrowserWindow.activeTab.url,open_url="https://web.archive.org/save/"+encodeURI(url.replace(pattern,"")),safari.application.activeBrowserWindow.activeTab.url=open_url}function _onRecentVersion(){safari.extension.globalPage.contentWindow._onRecentVersion()}function _onFirstVersion(){safari.extension.globalPage.contentWindow._onFirstVersion()}function shareOnFacebook(e,n){safari.application.activeBrowserWindow.openTab().url=getSharingUrl(e,n)}function getSharingUrl(e,n,t,o,i){return"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)+"&title="+encodeURIComponent(n)}function extensionStateChange(e,n){"undefined"!=typeof safari&&void 0!==safari.extension&&safari.extension.globalPage.contentWindow.modalButton.modeChange(),$(e).show(),$(n).hide()}function activateExtension(){extensionStateChange("#deactivateExtension","#activateExtension"),"undefined"!=typeof safari&&void 0!==safari.extension&&(safari.extension.toolbarItems[0].image=safari.extension.baseURI+"img/extension_on.png")}function deactivateExtension(){extensionStateChange("#activateExtension","#deactivateExtension"),"undefined"!=typeof safari&&void 0!==safari.extension&&(safari.extension.toolbarItems[0].image=safari.extension.baseURI+"img/extension_off.png")}var pattern=/https:\/\/web\.archive\.org\/web\/(.+?)\//g;window.onload=function(){document.getElementById("btn_save_page_now").onclick=_onSavePageNow,document.getElementById("btn_recent_version").onclick=_onRecentVersion,document.getElementById("btn_first_version").onclick=_onFirstVersion,document.getElementById("btn_social_facebook").onclick=_onFacebook,document.getElementById("btn_social_twitter").onclick=_onTwitter,document.getElementById("btn_social_google").onclick=_onGooglePlus,document.getElementById("deactivateExtension").onclick=deactivateExtension,document.getElementById("activateExtension").onclick=activateExtension};